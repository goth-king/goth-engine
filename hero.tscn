[gd_scene load_steps=19 format=3 uid="uid://pn8j1jn1n85j"]

[ext_resource type="Script" path="res://hero.gd" id="1_ivxtd"]
[ext_resource type="Script" path="res://PlayerInput.gd" id="2_4ccyq"]
[ext_resource type="PackedScene" uid="uid://bu50dykltg3ag" path="res://PaladinModel.tscn" id="2_cnhsl"]
[ext_resource type="AnimationLibrary" uid="uid://bioq5x26vsl0h" path="res://animations/Man.res" id="4_yrn6p"]
[ext_resource type="Script" path="res://AttackArea3D.gd" id="6_0ormc"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_iaoxi"]
radius = 0.25
height = 1.7

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_q345g"]
animation = &"MaleAnimations/Alert"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_wvsue"]
animation = &"MaleAnimations/Punch"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_hf4ks"]
filters = ["../GeneralSkeleton:Chest", "../GeneralSkeleton:Head", "../GeneralSkeleton:Hips", "../GeneralSkeleton:LeftHand", "../GeneralSkeleton:LeftIndexDistal", "../GeneralSkeleton:LeftIndexIntermediate", "../GeneralSkeleton:LeftIndexProximal", "../GeneralSkeleton:LeftLittleDistal", "../GeneralSkeleton:LeftLittleIntermediate", "../GeneralSkeleton:LeftLittleProximal", "../GeneralSkeleton:LeftLowerArm", "../GeneralSkeleton:LeftMiddleDistal", "../GeneralSkeleton:LeftMiddleIntermediate", "../GeneralSkeleton:LeftMiddleProximal", "../GeneralSkeleton:LeftRingDistal", "../GeneralSkeleton:LeftRingIntermediate", "../GeneralSkeleton:LeftRingProximal", "../GeneralSkeleton:LeftShoulder", "../GeneralSkeleton:LeftThumbDistal", "../GeneralSkeleton:LeftThumbMetacarpal", "../GeneralSkeleton:LeftThumbProximal", "../GeneralSkeleton:LeftUpperArm", "../GeneralSkeleton:Neck", "../GeneralSkeleton:RightHand", "../GeneralSkeleton:RightIndexDistal", "../GeneralSkeleton:RightIndexIntermediate", "../GeneralSkeleton:RightIndexProximal", "../GeneralSkeleton:RightLittleDistal", "../GeneralSkeleton:RightLittleIntermediate", "../GeneralSkeleton:RightLittleProximal", "../GeneralSkeleton:RightLowerArm", "../GeneralSkeleton:RightMiddleDistal", "../GeneralSkeleton:RightMiddleIntermediate", "../GeneralSkeleton:RightMiddleProximal", "../GeneralSkeleton:RightRingDistal", "../GeneralSkeleton:RightRingIntermediate", "../GeneralSkeleton:RightRingProximal", "../GeneralSkeleton:RightShoulder", "../GeneralSkeleton:RightThumbDistal", "../GeneralSkeleton:RightThumbMetacarpal", "../GeneralSkeleton:RightThumbProximal", "../GeneralSkeleton:RightUpperArm", "../GeneralSkeleton:Spine", "../GeneralSkeleton:UpperChest", "../GeneralSkeleton:mixamorig_LeftHandIndex1", "../GeneralSkeleton:mixamorig_LeftHandMiddle1", "../GeneralSkeleton:mixamorig_LeftHandPinky1", "../GeneralSkeleton:mixamorig_LeftHandRing1", "../GeneralSkeleton:mixamorig_LeftHandThumb1", "../GeneralSkeleton:mixamorig_RightHandIndex1", "../GeneralSkeleton:mixamorig_RightHandMiddle1", "../GeneralSkeleton:mixamorig_RightHandPinky1", "../GeneralSkeleton:mixamorig_RightHandRing1", "../GeneralSkeleton:mixamorig_RightHandThumb1"]
fadein_time = 0.25
fadeout_time = 0.25

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bbu8p"]
animation = &"MaleAnimations/Hit"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_m744a"]
filter_enabled = true
filters = ["../GeneralSkeleton:Chest", "../GeneralSkeleton:Head", "../GeneralSkeleton:LeftLowerArm", "../GeneralSkeleton:LeftMiddleProximal", "../GeneralSkeleton:LeftShoulder", "../GeneralSkeleton:LeftUpperArm", "../GeneralSkeleton:Neck", "../GeneralSkeleton:RightLowerArm", "../GeneralSkeleton:RightShoulder", "../GeneralSkeleton:RightUpperArm", "../GeneralSkeleton:Spine", "../GeneralSkeleton:UpperChest"]
fadein_time = 0.1
fadeout_time = 0.25

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6d3hj"]
animation = &"MaleAnimations/Idle"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_uemxx"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_o85ta"]
animation = &"MaleAnimations/Run"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_40lv5"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_xhafj"]
nodes/Alert/node = SubResource("AnimationNodeAnimation_q345g")
nodes/Alert/position = Vector2(-32, 160)
nodes/Attack/node = SubResource("AnimationNodeAnimation_wvsue")
nodes/Attack/position = Vector2(704, 304)
nodes/AttackShot/node = SubResource("AnimationNodeOneShot_hf4ks")
nodes/AttackShot/position = Vector2(976, 48)
nodes/Hit/node = SubResource("AnimationNodeAnimation_bbu8p")
nodes/Hit/position = Vector2(1056, 304)
nodes/HitShot/node = SubResource("AnimationNodeOneShot_m744a")
nodes/HitShot/position = Vector2(1280, 64)
nodes/Idle/node = SubResource("AnimationNodeAnimation_6d3hj")
nodes/Idle/position = Vector2(-32, 0)
nodes/IdleBlend/node = SubResource("AnimationNodeBlend2_uemxx")
nodes/IdleBlend/position = Vector2(336, -16)
nodes/Run/node = SubResource("AnimationNodeAnimation_o85ta")
nodes/Run/position = Vector2(272, 288)
nodes/RunBlend/node = SubResource("AnimationNodeBlend2_40lv5")
nodes/RunBlend/position = Vector2(656, 16)
nodes/output/position = Vector2(1632, 112)
node_connections = [&"output", 0, &"HitShot", &"AttackShot", 0, &"RunBlend", &"AttackShot", 1, &"Attack", &"HitShot", 0, &"AttackShot", &"HitShot", 1, &"Hit", &"IdleBlend", 0, &"Idle", &"IdleBlend", 1, &"Alert", &"RunBlend", 0, &"IdleBlend", &"RunBlend", 1, &"Run"]

[sub_resource type="BoxShape3D" id="BoxShape3D_1rupg"]
size = Vector3(0.75, 0.5, 0.5)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_0matx"]
radius = 0.25
height = 1.25

[node name="Hero" type="CharacterBody3D"]
script = ExtResource("1_ivxtd")
speed = 4
jump_velocity = null
sight_radius = null

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.85, 0)
shape = SubResource("CapsuleShape3D_iaoxi")

[node name="GeneralSkeleton" parent="." instance=ExtResource("2_cnhsl")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
bones/0/position = Vector3(0.00278031, 0.892159, -0.00271527)
bones/0/rotation = Quaternion(-0.0387188, -0.366469, -0.0143024, 0.929514)
bones/1/rotation = Quaternion(0.0470207, 0.0398538, -0.00830383, 0.998064)
bones/2/rotation = Quaternion(0.0939318, 0.080372, -0.017706, 0.992171)
bones/3/rotation = Quaternion(0.0939442, 0.0804626, -0.0178114, 0.992161)
bones/4/rotation = Quaternion(-0.0204696, -0.0104498, 0.00188269, 0.999734)
bones/5/rotation = Quaternion(-0.0722263, 0.17721, -0.00118489, 0.981519)
bones/9/rotation = Quaternion(0.518831, 0.466142, 0.522886, -0.490017)
bones/10/rotation = Quaternion(0.0483374, 0.835896, -0.536065, 0.107588)
bones/11/rotation = Quaternion(0.291331, -0.594943, 0.300852, 0.686045)
bones/12/rotation = Quaternion(-0.0656164, 0.79304, 0.0801586, 0.600297)
bones/13/rotation = Quaternion(0.0423549, 0.0812739, -0.0531232, 0.994374)
bones/14/rotation = Quaternion(-0.218566, 0.673687, 0.208067, 0.674598)
bones/15/rotation = Quaternion(-1.77636e-15, 7.45058e-08, 1.11022e-15, 1)
bones/16/rotation = Quaternion(1.49012e-08, -1.04308e-07, 0, 1)
bones/17/position = Vector3(-0.0270292, 0.117488, 0.00221006)
bones/17/rotation = Quaternion(0.0780847, -0.00388282, 0.0657403, 0.994769)
bones/18/rotation = Quaternion(0.163622, -0.00113426, -0.00521593, 0.986509)
bones/19/rotation = Quaternion(0, 0, 5.96046e-08, 1)
bones/20/rotation = Quaternion(2.98023e-08, -2.98023e-08, 2.98023e-08, 1)
bones/21/position = Vector3(-9.88073e-08, 0.122363, -1.08253e-05)
bones/21/rotation = Quaternion(0.13577, 0.00352114, -0.0715367, 0.988148)
bones/22/rotation = Quaternion(0.241687, -0.00170567, 0.019937, 0.970148)
bones/23/rotation = Quaternion(-2.98023e-08, 0, 0, 1)
bones/24/rotation = Quaternion(-2.98023e-08, 0, 0, 1)
bones/25/position = Vector3(0.0212307, 0.116343, -0.000106038)
bones/25/rotation = Quaternion(0.275581, -0.0187668, -0.118451, 0.953767)
bones/26/rotation = Quaternion(0.287682, 0.00176762, 0.0248593, 0.957402)
bones/27/rotation = Quaternion(1.49012e-08, -1.49012e-08, 0, 1)
bones/28/rotation = Quaternion(2.98023e-08, 2.98023e-08, -2.98023e-08, 1)
bones/29/position = Vector3(0.0452635, 0.104478, 0.00215663)
bones/29/rotation = Quaternion(0.301567, -0.0235475, -0.154807, 0.940499)
bones/30/rotation = Quaternion(0.347308, 0.0115491, 0.0497368, 0.93636)
bones/31/rotation = Quaternion(-2.98023e-08, 1.49012e-08, -2.98023e-08, 1)
bones/33/rotation = Quaternion(0.485949, -0.491121, -0.568368, -0.446779)
bones/34/rotation = Quaternion(0.183218, 0.834354, -0.514202, -0.076694)
bones/35/rotation = Quaternion(0.301444, 0.657081, -0.214082, 0.65692)
bones/36/rotation = Quaternion(0.14677, -0.732359, 0.0146321, 0.664752)
bones/37/position = Vector3(0.0287621, 0.0362868, 0.0207599)
bones/37/rotation = Quaternion(0.00203718, 0.0767556, 0.0411573, 0.996198)
bones/38/rotation = Quaternion(-0.110522, -0.753449, -0.0901893, 0.641846)
bones/39/rotation = Quaternion(1.49012e-08, 2.98023e-08, -5.96046e-08, 1)
bones/40/rotation = Quaternion(-1.49012e-08, -1.04308e-07, 0, 1)
bones/41/position = Vector3(0.0270293, 0.117488, 0.00223062)
bones/41/rotation = Quaternion(0.0394287, 0.0104619, 0.00987483, 0.999119)
bones/42/rotation = Quaternion(0.147313, 0.000154544, 0.00918885, 0.989047)
bones/43/rotation = Quaternion(4.47035e-08, 0, 5.96046e-08, 1)
bones/44/rotation = Quaternion(0, -1.49012e-08, -1.49012e-08, 1)
bones/45/position = Vector3(2.29153e-07, 0.122362, 1.06824e-05)
bones/45/rotation = Quaternion(0.111079, 0.00856293, 0.0252057, 0.993455)
bones/46/rotation = Quaternion(0.309605, 0.00167977, -0.0209264, 0.950634)
bones/47/rotation = Quaternion(-2.98023e-08, 2.98023e-08, 2.98023e-08, 1)
bones/48/rotation = Quaternion(-1.49012e-08, -1.49012e-08, -1.49012e-08, 1)
bones/49/position = Vector3(-0.0212306, 0.116343, -8.562e-05)
bones/49/rotation = Quaternion(0.210049, -0.00659899, 0.0658913, 0.975446)
bones/50/rotation = Quaternion(0.342945, -0.00250174, -0.0358157, 0.938669)
bones/51/rotation = Quaternion(0, 0, 1.49012e-08, 1)
bones/52/rotation = Quaternion(0, -2.98023e-08, -2.98023e-08, 1)
bones/53/position = Vector3(-0.0452633, 0.104477, 0.00217495)
bones/53/rotation = Quaternion(0.207169, -0.011149, 0.0920772, 0.973899)
bones/54/rotation = Quaternion(0.372743, -0.0132578, -0.0701795, 0.925182)
bones/55/rotation = Quaternion(0, 0, 5.96046e-08, 1)
bones/56/rotation = Quaternion(0, -5.96046e-08, 0, 1)
bones/57/rotation = Quaternion(0.0785624, 0.215218, 0.968063, -0.101798)
bones/58/rotation = Quaternion(0.038756, 0.948215, -0.291829, -0.119258)
bones/59/rotation = Quaternion(-0.042932, 0.671513, -0.738205, 0.0477566)
bones/60/rotation = Quaternion(0.0282072, 0.999363, 0.0204813, -0.00760418)
bones/62/rotation = Quaternion(-0.124663, 0.0128862, 0.983771, 0.128403)
bones/63/rotation = Quaternion(0.0244645, 0.95952, -0.269871, -0.0767594)
bones/64/rotation = Quaternion(0.100633, 0.564527, -0.811578, -0.111909)
bones/65/rotation = Quaternion(0.00312944, 0.999869, 0.0156124, -0.00292876)

[node name="PlayerInput" type="Node" parent="."]
script = ExtResource("2_4ccyq")

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeBlendTree_xhafj")
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/AttackShot/active = false
parameters/AttackShot/request = 0
parameters/HitShot/active = false
parameters/HitShot/request = 0
parameters/IdleBlend/blend_amount = 1.0
parameters/RunBlend/blend_amount = 0

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
root_node = NodePath("../GeneralSkeleton")
libraries = {
"MaleAnimations": ExtResource("4_yrn6p")
}

[node name="HitBox" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -0.5)
script = ExtResource("6_0ormc")

[node name="CollisionShape3D" type="CollisionShape3D" parent="HitBox"]
shape = SubResource("BoxShape3D_1rupg")
disabled = true

[node name="HurtBox" type="Area3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="HurtBox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_0matx")

[connection signal="body_entered" from="HitBox" to="HitBox" method="_on_body_entered"]
