[gd_scene load_steps=20 format=3 uid="uid://pn8j1jn1n85j"]

[ext_resource type="Script" path="res://hero.gd" id="1_ivxtd"]
[ext_resource type="Script" path="res://PlayerInput.gd" id="2_4ccyq"]
[ext_resource type="PackedScene" uid="uid://bu50dykltg3ag" path="res://PaladinModel.tscn" id="2_cnhsl"]
[ext_resource type="PackedScene" uid="uid://bfvlj2fatrhgs" path="res://state_machine.tscn" id="4_wbrwt"]
[ext_resource type="AnimationLibrary" uid="uid://bioq5x26vsl0h" path="res://animations/Man.res" id="4_yrn6p"]
[ext_resource type="Script" path="res://AttackArea3D.gd" id="6_0ormc"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_iaoxi"]
radius = 0.25
height = 1.7

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_q345g"]
animation = &"MaleAnimations/Alert"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_wvsue"]
animation = &"MaleAnimations/Punch"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_hf4ks"]
filters = ["../GeneralSkeleton:Chest", "../GeneralSkeleton:Head", "../GeneralSkeleton:Hips", "../GeneralSkeleton:LeftHand", "../GeneralSkeleton:LeftIndexDistal", "../GeneralSkeleton:LeftIndexIntermediate", "../GeneralSkeleton:LeftIndexProximal", "../GeneralSkeleton:LeftLittleDistal", "../GeneralSkeleton:LeftLittleIntermediate", "../GeneralSkeleton:LeftLittleProximal", "../GeneralSkeleton:LeftLowerArm", "../GeneralSkeleton:LeftMiddleDistal", "../GeneralSkeleton:LeftMiddleIntermediate", "../GeneralSkeleton:LeftMiddleProximal", "../GeneralSkeleton:LeftRingDistal", "../GeneralSkeleton:LeftRingIntermediate", "../GeneralSkeleton:LeftRingProximal", "../GeneralSkeleton:LeftShoulder", "../GeneralSkeleton:LeftThumbDistal", "../GeneralSkeleton:LeftThumbMetacarpal", "../GeneralSkeleton:LeftThumbProximal", "../GeneralSkeleton:LeftUpperArm", "../GeneralSkeleton:Neck", "../GeneralSkeleton:RightHand", "../GeneralSkeleton:RightIndexDistal", "../GeneralSkeleton:RightIndexIntermediate", "../GeneralSkeleton:RightIndexProximal", "../GeneralSkeleton:RightLittleDistal", "../GeneralSkeleton:RightLittleIntermediate", "../GeneralSkeleton:RightLittleProximal", "../GeneralSkeleton:RightLowerArm", "../GeneralSkeleton:RightMiddleDistal", "../GeneralSkeleton:RightMiddleIntermediate", "../GeneralSkeleton:RightMiddleProximal", "../GeneralSkeleton:RightRingDistal", "../GeneralSkeleton:RightRingIntermediate", "../GeneralSkeleton:RightRingProximal", "../GeneralSkeleton:RightShoulder", "../GeneralSkeleton:RightThumbDistal", "../GeneralSkeleton:RightThumbMetacarpal", "../GeneralSkeleton:RightThumbProximal", "../GeneralSkeleton:RightUpperArm", "../GeneralSkeleton:Spine", "../GeneralSkeleton:UpperChest", "../GeneralSkeleton:mixamorig_LeftHandIndex1", "../GeneralSkeleton:mixamorig_LeftHandMiddle1", "../GeneralSkeleton:mixamorig_LeftHandPinky1", "../GeneralSkeleton:mixamorig_LeftHandRing1", "../GeneralSkeleton:mixamorig_LeftHandThumb1", "../GeneralSkeleton:mixamorig_RightHandIndex1", "../GeneralSkeleton:mixamorig_RightHandMiddle1", "../GeneralSkeleton:mixamorig_RightHandPinky1", "../GeneralSkeleton:mixamorig_RightHandRing1", "../GeneralSkeleton:mixamorig_RightHandThumb1"]
fadein_time = 0.25
fadeout_time = 0.25

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bbu8p"]
animation = &"MaleAnimations/Hit"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_m744a"]
filter_enabled = true
filters = ["../GeneralSkeleton:Chest", "../GeneralSkeleton:Head", "../GeneralSkeleton:LeftLowerArm", "../GeneralSkeleton:LeftMiddleProximal", "../GeneralSkeleton:LeftShoulder", "../GeneralSkeleton:LeftUpperArm", "../GeneralSkeleton:Neck", "../GeneralSkeleton:RightLowerArm", "../GeneralSkeleton:RightShoulder", "../GeneralSkeleton:RightUpperArm", "../GeneralSkeleton:Spine", "../GeneralSkeleton:UpperChest"]
fadein_time = 0.1
fadeout_time = 0.25

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6d3hj"]
animation = &"MaleAnimations/Idle"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_uemxx"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_o85ta"]
animation = &"MaleAnimations/Run"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_40lv5"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_xhafj"]
nodes/Alert/node = SubResource("AnimationNodeAnimation_q345g")
nodes/Alert/position = Vector2(-32, 160)
nodes/Attack/node = SubResource("AnimationNodeAnimation_wvsue")
nodes/Attack/position = Vector2(704, 304)
nodes/AttackShot/node = SubResource("AnimationNodeOneShot_hf4ks")
nodes/AttackShot/position = Vector2(976, 48)
nodes/Hit/node = SubResource("AnimationNodeAnimation_bbu8p")
nodes/Hit/position = Vector2(1056, 304)
nodes/HitShot/node = SubResource("AnimationNodeOneShot_m744a")
nodes/HitShot/position = Vector2(1280, 64)
nodes/Idle/node = SubResource("AnimationNodeAnimation_6d3hj")
nodes/Idle/position = Vector2(-32, 0)
nodes/IdleBlend/node = SubResource("AnimationNodeBlend2_uemxx")
nodes/IdleBlend/position = Vector2(336, -16)
nodes/Run/node = SubResource("AnimationNodeAnimation_o85ta")
nodes/Run/position = Vector2(272, 288)
nodes/RunBlend/node = SubResource("AnimationNodeBlend2_40lv5")
nodes/RunBlend/position = Vector2(656, 16)
nodes/output/position = Vector2(1632, 112)
node_connections = [&"output", 0, &"HitShot", &"AttackShot", 0, &"RunBlend", &"AttackShot", 1, &"Attack", &"HitShot", 0, &"AttackShot", &"HitShot", 1, &"Hit", &"IdleBlend", 0, &"Idle", &"IdleBlend", 1, &"Alert", &"RunBlend", 0, &"IdleBlend", &"RunBlend", 1, &"Run"]

[sub_resource type="BoxShape3D" id="BoxShape3D_1rupg"]
size = Vector3(0.75, 0.5, 0.5)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_0matx"]
radius = 0.25
height = 1.25

[node name="Hero" type="CharacterBody3D"]
script = ExtResource("1_ivxtd")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.85, 0)
shape = SubResource("CapsuleShape3D_iaoxi")

[node name="GeneralSkeleton" parent="." instance=ExtResource("2_cnhsl")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
bones/0/position = Vector3(0.0023145, 0.889583, -0.00972492)
bones/0/rotation = Quaternion(-0.0367457, -0.366988, -0.0134377, 0.929403)
bones/1/rotation = Quaternion(0.0501844, 0.0401566, -0.0085182, 0.997896)
bones/2/rotation = Quaternion(0.100287, 0.0809311, -0.0184962, 0.991489)
bones/3/rotation = Quaternion(0.100287, 0.0809385, -0.0185085, 0.991488)
bones/4/rotation = Quaternion(-0.03672, -0.0111041, 0.00216864, 0.999262)
bones/5/rotation = Quaternion(-0.0538819, 0.176923, -0.0127004, 0.982667)
bones/9/rotation = Quaternion(0.524011, 0.460948, 0.541822, -0.468368)
bones/10/rotation = Quaternion(0.0473381, 0.84318, -0.522839, 0.115954)
bones/11/rotation = Quaternion(0.277763, -0.603949, 0.295504, 0.686127)
bones/12/rotation = Quaternion(-0.10381, 0.789473, 0.125426, 0.591798)
bones/13/rotation = Quaternion(0.0442518, 0.0782505, -0.0463293, 0.994873)
bones/14/rotation = Quaternion(-0.219125, 0.67342, 0.208721, 0.674481)
bones/15/rotation = Quaternion(-1.77636e-15, 7.45058e-08, 1.11022e-15, 1)
bones/16/rotation = Quaternion(1.49012e-08, -1.04308e-07, 0, 1)
bones/17/position = Vector3(-0.0270292, 0.117488, 0.00221006)
bones/17/rotation = Quaternion(0.0334383, -0.00590394, 0.0610242, 0.997559)
bones/18/rotation = Quaternion(0.143253, -0.000730813, -0.0069011, 0.989662)
bones/19/rotation = Quaternion(0, 0, 5.96046e-08, 1)
bones/20/rotation = Quaternion(2.98023e-08, -2.98023e-08, 2.98023e-08, 1)
bones/21/position = Vector3(-9.88073e-08, 0.122363, -1.08253e-05)
bones/21/rotation = Quaternion(0.125149, 0.00602138, -0.0855369, 0.988425)
bones/22/rotation = Quaternion(0.18998, -0.0013158, 0.0142425, 0.981684)
bones/23/rotation = Quaternion(-2.98023e-08, 0, 0, 1)
bones/24/rotation = Quaternion(-2.98023e-08, 0, 0, 1)
bones/25/position = Vector3(0.0212307, 0.116343, -0.000106038)
bones/25/rotation = Quaternion(0.265537, -0.0133792, -0.13052, 0.955131)
bones/26/rotation = Quaternion(0.276151, 0.0017539, 0.0240916, 0.960811)
bones/27/rotation = Quaternion(1.49012e-08, -1.49012e-08, 0, 1)
bones/28/rotation = Quaternion(2.98023e-08, 2.98023e-08, -2.98023e-08, 1)
bones/29/position = Vector3(0.0452635, 0.104478, 0.00215663)
bones/29/rotation = Quaternion(0.291356, -0.0140502, -0.163294, 0.94247)
bones/30/rotation = Quaternion(0.336773, 0.0111584, 0.0495556, 0.940215)
bones/31/rotation = Quaternion(-2.98023e-08, 1.49012e-08, -2.98023e-08, 1)
bones/33/rotation = Quaternion(0.489093, -0.48445, -0.589231, -0.42297)
bones/34/rotation = Quaternion(0.186664, 0.844985, -0.491884, -0.0959492)
bones/35/rotation = Quaternion(0.286287, 0.678802, -0.222373, 0.638606)
bones/36/rotation = Quaternion(0.146272, -0.743379, 0.00373997, 0.65267)
bones/37/position = Vector3(0.0287621, 0.0362868, 0.0207599)
bones/37/rotation = Quaternion(-0.000947682, 0.0774673, 0.0437097, 0.996036)
bones/38/rotation = Quaternion(-0.107789, -0.75429, -0.0911572, 0.641185)
bones/39/rotation = Quaternion(1.49012e-08, 2.98023e-08, -5.96046e-08, 1)
bones/40/rotation = Quaternion(-1.49012e-08, -1.04308e-07, 0, 1)
bones/41/position = Vector3(0.0270293, 0.117488, 0.00223062)
bones/41/rotation = Quaternion(0.0389117, 0.00978383, 0.0102393, 0.999142)
bones/42/rotation = Quaternion(0.147295, 0.000230555, 0.00982232, 0.989044)
bones/43/rotation = Quaternion(4.47035e-08, 0, 5.96046e-08, 1)
bones/44/rotation = Quaternion(0, -1.49012e-08, -1.49012e-08, 1)
bones/45/position = Vector3(2.29153e-07, 0.122362, 1.06824e-05)
bones/45/rotation = Quaternion(0.111065, 0.00856064, 0.0245677, 0.993473)
bones/46/rotation = Quaternion(0.26303, 0.00138911, -0.0167301, 0.964642)
bones/47/rotation = Quaternion(-2.98023e-08, 2.98023e-08, 2.98023e-08, 1)
bones/48/rotation = Quaternion(-1.49012e-08, -1.49012e-08, -1.49012e-08, 1)
bones/49/position = Vector3(-0.0212306, 0.116343, -8.562e-05)
bones/49/rotation = Quaternion(0.186756, -0.00859235, 0.0674777, 0.980049)
bones/50/rotation = Quaternion(0.320047, -0.0023585, -0.0337803, 0.946796)
bones/51/rotation = Quaternion(0, 0, 1.49012e-08, 1)
bones/52/rotation = Quaternion(0, -2.98023e-08, -2.98023e-08, 1)
bones/53/position = Vector3(-0.0452633, 0.104477, 0.00217495)
bones/53/rotation = Quaternion(0.207169, -0.011149, 0.0920772, 0.973899)
bones/54/rotation = Quaternion(0.349061, -0.0121931, -0.0687083, 0.934498)
bones/55/rotation = Quaternion(0, 0, 5.96046e-08, 1)
bones/56/rotation = Quaternion(0, -5.96046e-08, 0, 1)
bones/57/rotation = Quaternion(0.0771387, 0.224712, 0.965694, -0.104832)
bones/58/rotation = Quaternion(0.0386573, 0.946848, -0.296845, -0.117763)
bones/59/rotation = Quaternion(-0.0449968, 0.671901, -0.737579, 0.0500215)
bones/60/rotation = Quaternion(0.0279457, 0.999372, 0.0202368, -0.00803628)
bones/62/rotation = Quaternion(-0.123649, 0.0311382, 0.983788, 0.126108)
bones/63/rotation = Quaternion(0.0264747, 0.952936, -0.29265, -0.074617)
bones/64/rotation = Quaternion(0.0989994, 0.556471, -0.81757, -0.110088)
bones/65/rotation = Quaternion(0.00312944, 0.999869, 0.0156124, -0.00292876)

[node name="PlayerInput" type="Node" parent="."]
script = ExtResource("2_4ccyq")

[node name="StateMachine" parent="." node_paths=PackedStringArray("body", "animtree") instance=ExtResource("4_wbrwt")]
body = NodePath("..")
animtree = NodePath("../AnimationTree")

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeBlendTree_xhafj")
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/AttackShot/active = false
parameters/AttackShot/request = 0
parameters/HitShot/active = false
parameters/HitShot/request = 0
parameters/IdleBlend/blend_amount = 1.0
parameters/RunBlend/blend_amount = 0

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
root_node = NodePath("../GeneralSkeleton")
libraries = {
"MaleAnimations": ExtResource("4_yrn6p")
}

[node name="HitBox" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -0.5)
script = ExtResource("6_0ormc")

[node name="CollisionShape3D" type="CollisionShape3D" parent="HitBox"]
shape = SubResource("BoxShape3D_1rupg")
disabled = true

[node name="HurtBox" type="Area3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="HurtBox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_0matx")

[connection signal="body_entered" from="HitBox" to="HitBox" method="_on_body_entered"]
